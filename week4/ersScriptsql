create user Reimbursement
identified by p4ssw0rd;

GRANT connect to Reimbursement;
GRANT resource to Reimbursement;
GRANT create session TO Reimbursement;
GRANT create table TO Reimbursement;
GRANT create view TO Reimbursement;

create table ERS_REIMBURSEMENT_STATUS (
  REIMBURSEMENT_STATUS_ID number,
  REIMBURSEMENT_STATUS varchar2(10),
  PRIMARY KEY (REIMBURSEMENT_STATUS_ID)
);
create table ERS_REIMBURSEMENT_TYPE (
  REIMBURSEMENT_TYPE_ID number,
  REIMBURSEMENT_TYPE varchar2(10),
  PRIMARY KEY (REIMBURSEMENT_TYPE_ID)
);
create table ERS_USER_ROLES (
  ERS_USER_ID number,
  ERS_USER varchar2(10),
  PRIMARY KEY (ERS_USER_ID)
);

ALTER TABLE ERS_REIMBURSEMENT_STATUS DROP COLUMN REIMBURSEMENT_STATUS;
ALTER TABLE ERS_REIMBURSEMENT_STATUS 
ADD REIMBURSEMENT_STATUS varchar2(10) NOT NULL;

create table ERS_USERS(
ERS_USER_ID NUMBER NOT NULL,
ERS_USERNAME VARCHAR2(50) NOT NULL UNIQUE,
ERS_PASSWORD VARCHAR2(50) NOT NULL,
USER_FIRST_NAME VARCHAR2(100) NOT NULL,
USER_LAST_NAME VARCHAR2(100) NOT NULL,
USER_EMAIL VARCHAR2(150) NOT NULL UNIQUE,
USER_ROLE_ID NUMBER,
PRIMARY KEY (ERS_USER_ID),
FOREIGN KEY (USER_ROLE_ID) REFERENCES ERS_USER_ROLES (ERS_USER_ID)
);

CREATE TABLE ERS_REIMBURSEMENT(
REIMB_ID NUMBER NOT NULL,
REIMB_AMOUNT NUMBER NOT NULL,
REIMB_SUBMITTED TIMESTAMP NOT NULL,
REIMB_RESOLVED TIMESTAMP,
REIMB_DESCRIPTION VARCHAR2(250),
REIMB_RECEIPT BLOB,
REIMB_AUTHOR NUMBER NOT NULL,
REIMB_RESOLVER NUMBER,
REIMB_STATUS_ID NUMBER NOT NULL,
REIMB_TYPE_ID NUMBER NOT NULL,
PRIMARY KEY (REIMB_ID),
FOREIGN KEY (REIMB_AUTHOR) REFERENCES ERS_USERS (ERS_USER_ID),
FOREIGN KEY (REIMB_RESOLVER) REFERENCES ERS_USERS (ERS_USER_ID),
FOREIGN KEY (REIMB_STATUS_ID) 
REFERENCES ERS_REIMBURSEMENT_STATUS (REIMBURSEMENT_STATUS_ID),
FOREIGN KEY (REIMB_TYPE_ID) 
REFERENCES ERS_REIMBURSEMENT_TYPE (REIMBURSEMENT_TYPE_ID)
);




